<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ConconiAnaerobicThresholdTest">
<title>Analysis of Garmin TCX data for Conconi anaerobic threshold test • ConconiAnaerobicThresholdTest</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis of Garmin TCX data for Conconi anaerobic threshold test">
<meta property="og:description" content="ConconiAnaerobicThresholdTest">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ConconiAnaerobicThresholdTest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/usage.html">Analysis of Garmin TCX data for Conconi anaerobic threshold test</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/waldronlab/ConconiAnaerobicThresholdTest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Analysis of Garmin TCX data for Conconi anaerobic threshold test</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/waldronlab/ConconiAnaerobicThresholdTest/blob/HEAD/vignettes/usage.Rmd" class="external-link"><code>vignettes/usage.Rmd</code></a></small>
      <div class="d-none name"><code>usage.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Rationale and validation for this method of estimating anaerobic
threshold is described by <span class="citation">Conconi et al.
(1996)</span>, but also disputed e.g. by <span class="citation">Jeukendrup et al. (1997)</span> and <span class="citation">Hofmann et al. (1997)</span> (see <a href="#references">References</a>).</p>
</div>
<div class="section level2">
<h2 id="performing-the-test">Performing the test<a class="anchor" aria-label="anchor" href="#performing-the-test"></a>
</h2>
<p>Use a chest strap heart rate monitor if available.</p>
<ol style="list-style-type: decimal">
<li>set the treadmill to 1% incline to compensate for lack of wind
resistance</li>
<li>warm up by jogging on the treadmill at a slow speed for 10
minutes</li>
<li>rest for 10 minutes with light static or dynamic stretching</li>
<li>start at a low speed where you can still jog, not run, and have
several steps before you hit your anaerobic threshold. 6km/h is a likely
choice. km/h is likely better than mph for the smaller steps in
speed.</li>
<li>spend 90 seconds at each speed. After 90 seconds, increase the speed
by 1 km/h</li>
<li>continue until exhaustion, when you can no longer maintain the
speed. The test ends and the end of the last segment where the full 90
seconds are completed.</li>
</ol>
<p>At the end of the test, you can remain still for several minutes with
the heart rate monitor still recording, to separately measure and
compare rate of recovery. Analysis of heart rate recovery isn’t
currently handled by this package however.</p>
</div>
<div class="section level2">
<h2 id="exporting-the-garmin-tcx-file">Exporting the Garmin TCX file<a class="anchor" aria-label="anchor" href="#exporting-the-garmin-tcx-file"></a>
</h2>
<p>Open the workout in the web version of <a href="https://connect.garmin.com" class="external-link">Garmin Connect</a>. Click the gearbox
in the upper right-hand side:</p>
<p><img src="Screenshot-wideangle.png" width="650"></p>
<p>Then, export to TCX:</p>
<p><img src="Screenshot-menu.png" width="183"></p>
</div>
<div class="section level2">
<h2 id="non-garmin-data">Non-Garmin data<a class="anchor" aria-label="anchor" href="#non-garmin-data"></a>
</h2>
<p>Actually you don’t need to import a TCX file, what matters for the
<code><a href="../reference/fitmodel.html">fitmodel()</a></code> function is that you provide a data.frame with
columns <code>time</code>, <code>heart_rate</code>, and optionally
<code>speed</code>.</p>
<p>If you import a TCX file that is not from Garmin Connect, you may
need to rename the column containing heart rate to
<code>heart_rate</code> and the column containing time to
<code>time</code>. The <code>time</code> column should be in seconds or
a format that can be coerced to seconds using <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric()</a></code>,
such as the POSIXct/POSIXlt formats that most services likely provide.
If <code>useDeviceSpeed</code> is FALSE, then the speed column should be
<code>speed</code>.</p>
</div>
<div class="section level2">
<h2 id="how-to-figure-out-startminutes-and-endminutes">How to figure out startminutes and endminutes<a class="anchor" aria-label="anchor" href="#how-to-figure-out-startminutes-and-endminutes"></a>
</h2>
<p>Useful in case the run was started before the start of the actual
step test, or ended after.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/waldronlab/ConconiAnaerobicThresholdTest" class="external-link">ConconiAnaerobicThresholdTest</a></span><span class="op">)</span></span></code></pre></div>
<p>Note, files in this package are gzipped to save space. TCX files
exported as above will not have the <code>.gz</code> extension and you
should not use the <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">gzfile()</a></code> adapter used below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fname</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/2023-01-16.tcx.gz"</span>, package <span class="op">=</span> <span class="st">"ConconiAnaerobicThresholdTest"</span><span class="op">)</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepdata.html">prepdata</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">gzfile</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span>, startminutes <span class="op">=</span> <span class="fl">0</span>, endminutes <span class="op">=</span> <span class="fl">100</span>,</span>
<span>          useDeviceSpeed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">minutes</span>, <span class="va">tmp</span><span class="op">$</span><span class="va">speed</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-2-1.png" width="624"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">minutes</span>, <span class="va">tmp</span><span class="op">$</span><span class="va">cadence_running</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-2-2.png" width="624"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">minutes</span>, <span class="va">tmp</span><span class="op">$</span><span class="va">heart_rate</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-2-3.png" width="624"></p>
<p>By iteratively adjusting the <code>startminutes</code> and
<code>endminutes</code> and replotting, or just replotting with adjusted
axes, I found that the correct start time was at 0.15 minutes and
correct end time at 15 minutes.</p>
</div>
<div class="section level2">
<h2 id="january-2023-test">January 2023 test<a class="anchor" aria-label="anchor" href="#january-2023-test"></a>
</h2>
<p>Import the data and show the same plots.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat202301</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepdata.html">prepdata</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">gzfile</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span>, startminutes <span class="op">=</span> <span class="fl">0.15</span>, endminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>          useDeviceSpeed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">dat202301</span><span class="op">$</span><span class="va">date</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">dat202301</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2023-01-16"</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dat202301</span><span class="op">$</span><span class="va">minutes</span>, <span class="va">dat202301</span><span class="op">$</span><span class="va">speed</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-4-1.png" width="624"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dat202301</span><span class="op">$</span><span class="va">minutes</span>, <span class="va">dat202301</span><span class="op">$</span><span class="va">cadence_running</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-4-2.png" width="624"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dat202301</span><span class="op">$</span><span class="va">minutes</span>, <span class="va">dat202301</span><span class="op">$</span><span class="va">heart_rate</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-4-3.png" width="624"></p>
<div class="section level3">
<h3 id="model-fitting">Model fitting<a class="anchor" aria-label="anchor" href="#model-fitting"></a>
</h3>
<p>This model uses all available data points:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fitmodel.html">fitmodel</a></span><span class="op">(</span><span class="va">dat202301</span>, alldata <span class="op">=</span> <span class="cn">TRUE</span>, title <span class="op">=</span> <span class="st">"January 2023, using all HR data"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Threshold alpha: 11.8861748818112"</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] "Model coefficients: Beta[0], Beta[1], Beta[2]"</span></span>
<span><span class="co">#&gt; (Intercept)           x           w </span></span>
<span><span class="co">#&gt;   63.027275    9.167789   -5.201732</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-5-1.png" width="624"></p>
<p>And this model uses only the final 5 measurements in each step:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fitmodel.html">fitmodel</a></span><span class="op">(</span><span class="va">dat202301</span>, alldata <span class="op">=</span> <span class="cn">FALSE</span>, title <span class="op">=</span> <span class="st">"January 2023, using only last 5 HR measurements of each step"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Threshold alpha: 12.3667609360595"</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] "Model coefficients: Beta[0], Beta[1], Beta[2]"</span></span>
<span><span class="co">#&gt; (Intercept)           x           w </span></span>
<span><span class="co">#&gt;   73.442849    8.242858   -4.842851</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-6-1.png" width="624"></p>
</div>
</div>
<div class="section level2">
<h2 id="sept-15-2023-test">Sept 15, 2023 test<a class="anchor" aria-label="anchor" href="#sept-15-2023-test"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fname</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/2023-09-15.tcx.gz"</span>, </span>
<span>                    package <span class="op">=</span> <span class="st">"ConconiAnaerobicThresholdTest"</span><span class="op">)</span></span>
<span><span class="va">dat202309</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepdata.html">prepdata</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">gzfile</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span>, startminutes <span class="op">=</span> <span class="fl">23.8</span>, endminutes <span class="op">=</span> <span class="fl">40.1</span>,</span>
<span>          useDeviceSpeed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">dat202309</span><span class="op">$</span><span class="va">date</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">dat202309</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat202309</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">minutes</span>, <span class="va">speed</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-7-1.png" width="624"></p>
<div class="section level3">
<h3 id="model-fitting-1">Model fitting<a class="anchor" aria-label="anchor" href="#model-fitting-1"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fitmodel.html">fitmodel</a></span><span class="op">(</span><span class="va">dat202309</span>, alldata <span class="op">=</span> <span class="cn">TRUE</span>, title <span class="op">=</span> <span class="st">"September 2023, using all HR data"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Threshold alpha: 14.5862765638889"</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] "Model coefficients: Beta[0], Beta[1], Beta[2]"</span></span>
<span><span class="co">#&gt; (Intercept)           x           w </span></span>
<span><span class="co">#&gt;   76.921892    7.205029   -4.961977</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-8-1.png" width="624"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fitmodel.html">fitmodel</a></span><span class="op">(</span><span class="va">dat202309</span>, alldata <span class="op">=</span> <span class="cn">FALSE</span>, title <span class="op">=</span> <span class="st">"September 2023, using only last 5 HR measurements of each step"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Threshold alpha: 14.3405968989953"</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] "Model coefficients: Beta[0], Beta[1], Beta[2]"</span></span>
<span><span class="co">#&gt; (Intercept)           x           w </span></span>
<span><span class="co">#&gt;   82.822218    6.880000   -4.279986</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-8-2.png" width="624"></p>
</div>
</div>
<div class="section level2">
<h2 id="jan-10-2022-test">Jan 10, 2022 test<a class="anchor" aria-label="anchor" href="#jan-10-2022-test"></a>
</h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fname</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/2022-01-10.tcx.gz"</span>,</span>
<span>                    package <span class="op">=</span> <span class="st">"ConconiAnaerobicThresholdTest"</span><span class="op">)</span></span>
<span><span class="va">dat202201</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepdata.html">prepdata</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">gzfile</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span>, startminutes <span class="op">=</span> <span class="fl">26</span>, endminutes <span class="op">=</span> <span class="fl">38.99</span>,</span>
<span>          useDeviceSpeed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">dat202201</span><span class="op">$</span><span class="va">date</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">dat202201</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="model-fitting-2">Model fitting<a class="anchor" aria-label="anchor" href="#model-fitting-2"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fitmodel.html">fitmodel</a></span><span class="op">(</span><span class="va">dat202201</span>, alldata <span class="op">=</span> <span class="cn">TRUE</span>, title <span class="op">=</span> <span class="st">"January 2022, using all HR data"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Threshold alpha: 10.4210375092312"</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] "Model coefficients: Beta[0], Beta[1], Beta[2]"</span></span>
<span><span class="co">#&gt; (Intercept)           x           w </span></span>
<span><span class="co">#&gt;   76.397735    9.484450   -4.844825</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-10-1.png" width="624"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fitmodel.html">fitmodel</a></span><span class="op">(</span><span class="va">dat202201</span>, alldata <span class="op">=</span> <span class="cn">FALSE</span>, title <span class="op">=</span> <span class="st">"January 2022, using only last 5 HR measurements of each step"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Threshold alpha: 9.63106140240239"</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] "Model coefficients: Beta[0], Beta[1], Beta[2]"</span></span>
<span><span class="co">#&gt; (Intercept)           x           w </span></span>
<span><span class="co">#&gt;   78.199938   10.080009   -6.180004</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-10-2.png" width="624"></p>
</div>
</div>
<div class="section level2">
<h2 id="together">2022-23 together<a class="anchor" aria-label="anchor" href="#together"></a>
</h2>
<p>Some plots demonstrating comparison of two tests. First join the two
data.frames, and convert date and speed to factors (to make plots appear
the way I want them to).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xall</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">dat202309</span>, y<span class="op">=</span><span class="va">dat202301</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">dat202201</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">speed</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(time, latitude, longitude, altitude, distance,</span></span>
<span><span class="co">#&gt; heart_rate, speed, cadence_running, cadence_cycling, power, temperature,</span></span>
<span><span class="co">#&gt; minutes, date)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(time, latitude, longitude, altitude, distance,</span></span>
<span><span class="co">#&gt; heart_rate, speed, cadence_running, cadence_cycling, power, temperature,</span></span>
<span><span class="co">#&gt; minutes, date)`</span></span></code></pre></div>
<div class="section level3">
<h3 id="boxplot-of-heart-rate-vs-speed">Boxplot of heart rate vs speed<a class="anchor" aria-label="anchor" href="#boxplot-of-heart-rate-vs-speed"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">xall</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">speed</span>, y<span class="op">=</span><span class="va">heart_rate</span>, fill <span class="op">=</span> <span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span>  <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">200</span>, by<span class="op">=</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-12-1.png" width="624"></p>
</div>
<div class="section level3">
<h3 id="scatterplot-with-loess-smoothing-curve-for-heart-rate-vs-speed">Scatterplot with Loess smoothing curve for heart rate vs speed<a class="anchor" aria-label="anchor" href="#scatterplot-with-loess-smoothing-curve-for-heart-rate-vs-speed"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">xall</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">minutes</span>, y <span class="op">=</span> <span class="va">heart_rate</span>, color <span class="op">=</span> <span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>  <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">200</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"Heart Rate (bpm)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">16.5</span>, by <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"Time (minutes)"</span>, </span>
<span>                       sec.axis <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html" class="external-link">sec_axis</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">.</span> <span class="op">/</span> <span class="fl">1.5</span> <span class="op">+</span> <span class="fl">6</span>, </span>
<span>                                            name <span class="op">=</span> <span class="st">"speed (km/h)"</span>, </span>
<span>                                            breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">16</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-13-1.png" width="624"></p>
</div>
<div class="section level3">
<h3 id="scatterplot-with-loess-smoothing-curve-for-running-cadence-vs-speed">Scatterplot with Loess smoothing curve for running cadence vs
speed<a class="anchor" aria-label="anchor" href="#scatterplot-with-loess-smoothing-curve-for-running-cadence-vs-speed"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">xall</span>, <span class="va">date</span> <span class="op">!=</span> <span class="st">"2022-01-10"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># bad cadence data from 2022-01-10</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">speed</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        y <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">cadence_running</span>,</span>
<span>        color <span class="op">=</span> <span class="va">date</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>  <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">200</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"Cadence (spm)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">16.5</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        name <span class="op">=</span> <span class="st">"speed (km/h)"</span>,</span>
<span>        sec.axis <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html" class="external-link">sec_axis</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.</span> <span class="op">/</span> <span class="fl">1.5</span> <span class="op">+</span> <span class="fl">6</span>,</span>
<span>                            name <span class="op">=</span> <span class="st">"speed (km/h)"</span>,</span>
<span>                            breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">16</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-14-1.png" width="624"></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Conconi1996-hb" class="csl-entry">
Conconi, F, G Grazzi, I Casoni, C Guglielmini, C Borsetto, E Ballarin, G
Mazzoni, M Patracchini, and F Manfredini. 1996. <span>“The Conconi Test:
Methodology After 12 Years of Application.”</span> <em>International
Journal of Sports Medicine</em> 17 (7): 509–19. <a href="https://doi.org/10.1055/s-2007-972887" class="external-link">https://doi.org/10.1055/s-2007-972887</a>.
</div>
<div id="ref-Hofmann1997-vd" class="csl-entry">
Hofmann, P, R Pokan, S P von Duvillard, and P Schmid. 1997. <span>“The
Conconi Test.”</span> <em>International Journal of Sports Medicine</em>
18 (5): 397–99. <a href="https://doi.org/10.1055/s-2007-972654" class="external-link">https://doi.org/10.1055/s-2007-972654</a>.
</div>
<div id="ref-Jeukendrup1997-kn" class="csl-entry">
Jeukendrup, A E, M K Hesselink, H Kuipers, and H A Keizer. 1997.
<span>“The Conconi Test.”</span> <em>International Journal of Sports
Medicine</em> 18 (5): 393–96. <a href="https://doi.org/10.1055/s-2007-972652" class="external-link">https://doi.org/10.1055/s-2007-972652</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Levi Waldron.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
